import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

const resources = {
  en: {
    translation: {
      appName: "Lingo Vault",
      navigationSubtitle: "Choose a page",
      openNavigation: "Open navigation",
      navigationLabel: "Primary navigation",
      closeNavigation: "Close navigation",
      dismiss: "Dismiss",
      checkForUpdates: "Check Updates · v{{version}}",
      latestVersionMessage: "You're already on the latest version (v{{version}}).",
      androidUpdateTitle: "Android Update",
      androidUpdatePrompt: "Version v{{version}} is available.\n\n{{notes}}\n\nDownload now?",
      androidUpdateConfirm: "Update Now",
      androidUpdateLater: "Maybe Later",
      androidUpdateDownloading: "Downloading update...",
      androidUpdateInstalling: "Opening installer...",
      androidUpdateConfigMissing: "Android update configuration missing.",
      androidUpdateCheckError: "Update check failed: {{error}}",
      androidUpdateInstallError: "Installation failed: {{error}}",
      androidUpdateDefaultNotes: "Routine improvements and fixes.",
      webUpdateDownloadMessage: "Android APK v{{version}} is available. Download:\n{{url}}\n\nNotes:\n{{notes}}",
      exportJson: "Export JSON",
      exportCsv: "Export CSV",
      import: "Import",
      addWord: "Add Word",
      newEntry: "New Entry",
      navWordVault: "Word Vault",
      navWordVaultDesc: "Manage your saved words",
      navEssayVault: "All Essays",
      navEssayVaultDesc: "Browse every saved composition",
      navSmartImport: "Smart Import",
      navSmartImportDesc: "Let AI map and import your data",
      navPractice: "Practice",
      navPracticeDesc: "Exercises and reviews (coming soon)",
      navDrill: "Full-Screen Drill",
      navDrillDesc: "Speed review in a distraction-free layout",
      comingSoonTitle: "Coming soon",
      comingSoonMessage: "This feature is under construction. Check back later for new practice tools.",
      smartImportTitle: "Smart Import",
      smartImportDescription: "Paste sample data and let AI build a mapping before importing.",
      smartImportSampleHint: "Only the first five lines are sent to the model.",
      smartImportModeLabel: "Import target",
      smartImportModeWords: "Words",
      smartImportModeEssay: "Reference Essay",
      smartImportPlaceholder: "Paste CSV/TSV or JSON data here...",
      essayImportPlaceholder: "Paste raw prompt + essay text here...",
      essayImportHint: "The full essay text is sent to the model for extraction.",
      smartImportButton: "Smart Import",
      smartImportPlanTitle: "Generated Mapping Plan",
      smartImportNotes: "Notes: {{notes}}",
      smartImportConfidence: "Confidence: {{value}}%",
      smartImportError: "Smart import failed. Check your data or API settings.",
      essayImportError: "Essay extraction failed. Please verify the text and API settings.",
      essayImportMissingContent: "AI could not identify essay content. Provide a complete sample.",
      essayImportSaved: "Essay captured and saved locally.",
      essayGalleryEyebrow: "Reference Library",
      essayGalleryTitle: "All Essays",
      essayGalleryDescription: "Browse every imported composition in a flowing, two-column gallery. Tap one to start a recitation session.",
      essayGalleryCount: "{{count}} essays",
      essayGallerySource: "via {{source}}",
      essayGalleryReciteCount: "Recited {{count}}x",
      essayGalleryReadCount: "Read {{count}}x",
      essayGalleryEmpty: "No essays yet",
      essayGalleryEmptyHint: "Use Smart Import's essay mode or paste a reference composition to start building your library.",
      essayRecitalEyebrow: "Recitation Studio",
      essayRecitalTitle: "Focused Essay Practice",
      essayRecitalSubtitle: "Review the prompt and content, then log today's progress.",
      essayRecitalBack: "Back to gallery",
      essayRecitalProgress: "Recited {{count}}x",
      essayRecitalReads: "Read {{count}}x",
      essayRecitalLastRecite: "Last recite · {{value}}",
      essayRecitalLastRead: "Last read · {{value}}",
      essayRecitalMissing: "No essay selected.",
      essayRecitalReturnGallery: "Return to gallery",
      essayButtonRecite: "Recited today",
      essayButtonRead: "Read today",
      essayLogNever: "Never",
      essayReciteSuccess: "Great job! Another recitation logged.",
      essayReciteAlready: "You've already recited this essay today!",
      essayReadSuccess: "Logged today's reading!",
      essayReadAlready: "You've already read this essay today!",
      essayResultTitle: "Essay Extraction Result",
      essayStructureComplete: "Source structure: {{value}}",
      essayFormatFixed: "Format repair: {{value}}",
      essayTitleRestored: "Title restoration: {{value}}",
      essayStatusTrue: "Yes",
      essayStatusFalse: "No",
      essayTitleLabel: "Essay Title",
      essayContentLabel: "Essay Content",
      essayUntitled: "Untitled essay",
      migrationNotice: "Your data has been migrated to the latest format.",
      englishLabel: "English Word",
      englishPlaceholder: "e.g., Epiphany",
      aiFill: "AI Fill",
      autoMeaning: "Auto Definition",
      autoExample: "Auto Example",
      autoMeaningTitle: "Use AI to fill missing meanings",
      autoExampleTitle: "Use AI to fill missing example sentences",
      noMissingMeaning: "All entries already have meanings.",
      noMissingExample: "All entries already have example sentences.",
      meaningLabel: "Meaning (Chinese)",
      meaningPlaceholder: "e.g., 顿悟",
      exampleLabel: "Example Sentence",
      examplePlaceholder: "e.g., He had an epiphany about the solution.",
      proTip: "Pro tip: Press Ctrl+Enter to save",
      saveBtn: "Save to Vault",
      searchPlaceholder: "Search words, meanings...",
      entry: "entry",
      entries: "entries",
      aiError: "AI Service unavailable or key missing. Check Settings.",
      fileError: "Failed to parse file. Ensure it is valid JSON or CSV.",
      switchTo: "Switch to Chinese",
      mastered: "Mastered",
      drillMeaning: "Meaning",
      drillNoMeaning: "No meaning provided yet.",
      drillNoWords: "No words available. Add some to begin.",
      english: "English",
      chinese: "Chinese",
      example: "Example",
      cancel: "Cancel",
      save: "Save",
      added: "Added",
      noWords: "No words found.",
      startAdding: "Start by adding a new word or importing a file.",
      importAdded: "Imported {{count}} entries.",
      importNone: "No new entries were added.",
      langCode: "en",
      // Settings
      settings: "Settings",
      settingsTitle: "AI Service Settings",
      provider: "Provider",
      baseUrl: "Base URL",
      apiKey: "API Key",
      apiKeyHint: "Your key is stored locally in your browser.",
      modelName: "Model Name",
      saveSettings: "Save Settings",
      reset: "Reset Defaults",
      theme: "Theme",
      light: "Light",
      dark: "Dark",
      system: "System"
    }
  },
  zh: {
    translation: {
      appName: "Lingo Vault",
      navigationSubtitle: "选择页面",
      openNavigation: "打开侧边栏",
      navigationLabel: "主导航",
      closeNavigation: "关闭侧边栏",
      dismiss: "关闭",
      checkForUpdates: "检查更新 · v{{version}}",
      latestVersionMessage: "当前已经是最新版本（v{{version}}）。",
      androidUpdateTitle: "安卓更新",
      androidUpdatePrompt: "发现新版本 v{{version}}。\n\n{{notes}}\n\n是否立即下载？",
      androidUpdateConfirm: "立即更新",
      androidUpdateLater: "稍后提醒",
      androidUpdateDownloading: "正在下载更新...",
      androidUpdateInstalling: "正在打开安装程序...",
      androidUpdateConfigMissing: "未找到安卓更新配置。",
      androidUpdateCheckError: "检查更新失败：{{error}}",
      androidUpdateInstallError: "安装失败：{{error}}",
      androidUpdateDefaultNotes: "常规优化与修复。",
      webUpdateDownloadMessage: "安卓安装包 v{{version}} 可供下载：\n{{url}}\n\n更新说明：\n{{notes}}",
      exportJson: "导出 JSON",
      exportCsv: "导出 CSV",
      import: "导入",
      addWord: "添加单词",
      newEntry: "新增词条",
      navWordVault: "单词库",
      navWordVaultDesc: "管理已保存的词条",
      navEssayVault: "所有范文",
      navEssayVaultDesc: "以瀑布流浏览所有范文",
      navSmartImport: "智能导入",
      navSmartImportDesc: "使用 AI 推断映射并导入数据",
      navPractice: "练习模式",
      navPracticeDesc: "练习功能即将上线",
      navDrill: "满屏刷词",
      navDrillDesc: "全屏浏览并快速复习词汇",
      comingSoonTitle: "敬请期待",
      comingSoonMessage: "该功能正在开发中，敬请期待更多练习工具。",
      smartImportTitle: "智能导入",
      smartImportDescription: "粘贴样例数据，让 AI 自动生成映射并导入词条。",
      smartImportSampleHint: "仅上传前五行数据用于分析。",
      smartImportModeLabel: "导入类型",
      smartImportModeWords: "单词",
      smartImportModeEssay: "范文",
      smartImportPlaceholder: "在此粘贴 CSV/TSV 或 JSON 数据...",
      essayImportPlaceholder: "粘贴完整的题目+范文原文...",
      essayImportHint: "导入范文时会把全文发送给模型。",
      smartImportButton: "智能导入",
      smartImportPlanTitle: "生成的映射方案",
      smartImportNotes: "备注：{{notes}}",
      smartImportConfidence: "可信度：{{value}}%",
      smartImportError: "智能导入失败，请检查数据或 API 设置。",
      essayImportError: "范文提取失败，请检查文本或 API 设置。",
      essayImportMissingContent: "未识别到范文正文，请提供完整文本。",
      essayImportSaved: "范文已保存到本地。",
      essayGalleryEyebrow: "范文库",
      essayGalleryTitle: "所有范文",
      essayGalleryDescription: "以双栏瀑布流浏览全部导入的范文，点击任意卡片开启背诵。",
      essayGalleryCount: "共 {{count}} 篇",
      essayGallerySource: "来源：{{source}}",
      essayGalleryReciteCount: "已背 {{count}} 次",
      essayGalleryReadCount: "已读 {{count}} 次",
      essayGalleryEmpty: "还没有范文",
      essayGalleryEmptyHint: "可在智能导入中切换到范文模式，粘贴题目与范文内容来创建。",
      essayRecitalEyebrow: "背诵工作室",
      essayRecitalTitle: "专注范文背诵",
      essayRecitalSubtitle: "复习题目与全文，在页面底部记录今日进度。",
      essayRecitalBack: "返回瀑布流",
      essayRecitalProgress: "已背 {{count}} 次",
      essayRecitalReads: "已读 {{count}} 次",
      essayRecitalLastRecite: "上次背诵 · {{value}}",
      essayRecitalLastRead: "上次朗读 · {{value}}",
      essayRecitalMissing: "未选择任何范文。",
      essayRecitalReturnGallery: "回到所有范文",
      essayButtonRecite: "今天背了",
      essayButtonRead: "今天读了",
      essayLogNever: "从未",
      essayReciteSuccess: "又背了一篇文章，真棒！",
      essayReciteAlready: "今天已经背过这篇文章了喔！",
      essayReadSuccess: "今天完成了一次朗读！",
      essayReadAlready: "今天已经读过这篇文章了喔！",
      essayResultTitle: "范文提取结果",
      essayStructureComplete: "原文本结构：{{value}}",
      essayFormatFixed: "格式修复：{{value}}",
      essayTitleRestored: "题目还原：{{value}}",
      essayStatusTrue: "是",
      essayStatusFalse: "否",
      essayTitleLabel: "范文题目",
      essayContentLabel: "范文正文",
      essayUntitled: "未命名范文",
      migrationNotice: "数据已迁移到最新版本。",
      englishLabel: "英文单词",
      englishPlaceholder: "例如：Epiphany",
      aiFill: "AI 填充",
      autoMeaning: "自动释义",
      autoExample: "自动例句",
      autoMeaningTitle: "使用 AI 为缺失释义的词条补充释义",
      autoExampleTitle: "使用 AI 为缺少例句的词条补充例句",
      noMissingMeaning: "所有词条都已有释义。",
      noMissingExample: "所有词条都已有例句。",
      meaningLabel: "中文释义",
      meaningPlaceholder: "例如：顿悟",
      exampleLabel: "例句",
      examplePlaceholder: "例如：He had an epiphany about the solution.",
      proTip: "提示：按 Ctrl+Enter 快捷保存",
      saveBtn: "保存到词库",
      searchPlaceholder: "搜索单词、释义...",
      entry: "个词条",
      entries: "个词条",
      aiError: "AI 服务不可用或缺少密钥，请检查设置。",
      fileError: "文件解析失败，请确保是有效的 JSON 或 CSV 文件。",
      switchTo: "切换为英文",
      mastered: "已掌握",
      drillMeaning: "中文释义",
      drillNoMeaning: "暂无释义",
      drillNoWords: "请先添加一些词条。",
      english: "英文",
      chinese: "中文",
      example: "例句",
      cancel: "取消",
      save: "保存",
      added: "添加于",
      noWords: "暂无单词",
      startAdding: "开始添加新单词或导入文件.",
      importAdded: "成功导入 {{count}} 条词条。",
      importNone: "没有新的词条被导入。",
      langCode: "zh",
      // Settings
      settings: "设置",
      settingsTitle: "AI 服务设置",
      provider: "服务商",
      baseUrl: "API 地址 (Base URL)",
      apiKey: "API 密钥 (Key)",
      apiKeyHint: "密钥仅保存在您的浏览器本地。",
      modelName: "模型名称",
      saveSettings: "保存设置",
      reset: "恢复默认",
      theme: "外观主题",
      light: "浅色模式",
      dark: "深色模式",
      system: "跟随系统"
    }
  }
};

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'zh', // Default to Chinese
    supportedLngs: ['en', 'zh'],
    load: 'languageOnly',
    detection: {
      order: ['localStorage', 'navigator'],
      lookupLocalStorage: 'lingovault_lang',
    },
    interpolation: {
      escapeValue: false
    }
  });

export default i18n;